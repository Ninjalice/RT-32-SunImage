<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antenna Operator View</title>
</head>
<body>
    <h1>Antenna Operator View</h1>

    <form id="weatherForm">
        <label for="option">Select Weather Option:</label>
        <select name="option" id="option">
            <option value="Current">Current Weather</option>
            <option value="Next Day">Next Day Weather</option>
            <option value="Next 3 Days">Next 3 Days Weather</option>
        </select>
        <button type="button" onclick="checkWeather()">Check Weather</button>
    </form>

    <div id="weatherOutput"></div>

    <form id="antennaForm">
        <label for="year">Year:</label>
        <input type="text" id="year" name="year">
        <label for="month">Month:</label>
        <input type="text" id="month" name="month">
        <label for="day">Day:</label>
        <input type="text" id="day" name="day">
        <label for="hour">Hour:</label>
        <input type="text" id="hour" name="hour">
        <label for="minute">Minute:</label>
        <input type="text" id="minute" name="minute">
        <button type="button" onclick="calculateAntennaPositions()">Calculate Antenna Positions</button>
    </form>

    <form id="receiverForm">
        <label for="ip">IP:</label>
        <input type="text" id="ip" name="ip">
        <label for="port">Port:</label>
        <input type="text" id="port" name="port">
        <button type="button" onclick="startReceiver()">Start Receiver</button>
        <button type="button" onclick="stopReceiver()">Stop Receiver</button>
    </form>

    <button type="button" onclick="getBufferSize()">Get Buffer Size</button>

    <form id="uploadForm">
        <button type="button" onclick="uploadImages()">Upload Images</button>
    </form>

    <form id="ptfForm">
        <button type="button" onclick="sendPTFtoACU()">Send PTF to ACU</button>
    </form>

    <form id="exitForm">
        <label for="confirm">Confirm Exit:</label>
        <input type="checkbox" id="confirm" name="confirm" value="yes">
        <label for="confirm_again">Confirm Again:</label>
        <input type="checkbox" id="confirm_again" name="confirm_again" value="yes">
        <button type="button" onclick="confirmExit()">Confirm Exit</button>
    </form>

    <script>
        function checkWeather() {
            var option = document.getElementById('option').value;
            fetch('/check_weather', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ option: option })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('weatherOutput').innerText = data.weather_output;
            })
            .catch(error => console.error('Error:', error));
        }

        function calculateAntennaPositions() {
            var year = document.getElementById('year').value;
            var month = document.getElementById('month').value;
            var day = document.getElementById('day').value;
            var hour = document.getElementById('hour').value;
            var minute = document.getElementById('minute').value;
            fetch('/calculate_antenna_positions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: `year=${year}&month=${month}&day=${day}&hour=${hour}&minute=${minute}`
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch(error => console.error('Error:', error));
        }

        function startReceiver() {
            var ip = document.getElementById('ip').value;
            var port = document.getElementById('port').value;
            fetch('/start_receiver', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ ip: ip, port: port })
            })
            .then(response => response.json())
            .then(data => {
                alert(data.status);
            })
            .catch(error => console.error('Error:', error));
        }

        function stopReceiver() {
            fetch('/stop_receiver', {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                alert(data.status);
            })
            .catch(error => console.error('Error:', error));
        }

        function getBufferSize() {
            fetch('/get_buffer_size', {
                method: 'GET'
            })
            .then(response => response.json())
            .then(data => {
                alert("Buffer Size: " + data.buffer_size);
            })
            .catch(error => console.error('Error:', error));
        }

        function uploadImages() {
            fetch('/upload_images', {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch(error => console.error('Error:', error));
        }

        function sendPTFtoACU() {
            fetch('/send_ptf_to_acu', {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch(error => console.error('Error:', error));
        }

        function confirmExit() {
            var confirm = document.getElementById('confirm').checked;
            var confirmAgain = document.getElementById('confirm_again').checked;
            fetch('/confirm_exit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ confirm: confirm, confirm_again: confirmAgain })
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>
